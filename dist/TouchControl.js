!function(t,h){"object"==typeof exports&&"undefined"!=typeof module?h(exports):"function"==typeof define&&define.amd?define(["exports"],h):h(t.TouchControl=t.TouchControl||{})}(this,function(t){"use strict";class h{constructor(t){this.element=t||window,this.isTouch=!1,this.touch={delta:{},move:{},pitch:0,yaw:0,direction:{north:!1,east:!1,south:!1,west:!1}},this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.mouseMove=this.mouseMove.bind(this),this.init()}init(){this.element.addEventListener("mousedown",this.mouseDown),window.addEventListener("mouseup",this.mouseUp),window.addEventListener("mousemove",this.mouseMove),this.isTouch=!1}mouseDown(t){this.isTouch=!0,this.touch.move.x=t.clientX,this.touch.move.y=t.clientY}mouseUp(t){this.isTouch=!1,this.touch.direction={north:!1,east:!1,south:!1,west:!1}}mouseMove(t){if(!this.isTouch)return;let h={width:window.innerWidth,height:window.innerHeight};this.element!==window&&(h={width:this.element.clientWidth,height:this.element.clientHeight}),this.touch.delta={x:t.clientX-this.touch.move.x,y:t.clientY-this.touch.move.y},0!==this.touch.delta.y&&(this.touch.delta.y>0?(()=>{this.touch.direction.south=!0;this.touch.direction.north=!1})():(()=>{this.touch.direction.north=!0;this.touch.direction.south=!1})()),0!==this.touch.delta.x&&(this.touch.delta.x>0?(()=>{this.touch.direction.east=!0;this.touch.direction.west=!1})():(()=>{this.touch.direction.west=!0;this.touch.direction.east=!1})()),this.touch.move={x:t.clientX,y:t.clientY};let i=h.width/h.height,o=Math.PI/180,e=Math.PI/2;this.touch.yaw+=this.touch.delta.x/h.width*45*i*o,this.touch.pitch+=this.touch.delta.y/h.height*45*o,this.touch.pitch=Math.max(-e,Math.min(e,this.touch.pitch))}}class i{constructor(t){this.element=t||window,this.isTouch=!1,this.isPinch=!1,this.touch={delta:{},move:{},pinch:{},pitch:0,yaw:0,direction:{north:!1,east:!1,south:!1,west:!1}},this.touchDown=this.touchDown.bind(this),this.touchUp=this.touchUp.bind(this),this.touchMove=this.touchMove.bind(this),this.init()}init(){this.element.addEventListener("touchstart",this.touchDown),window.addEventListener("touchend",this.touchUp),window.addEventListener("touchmove",this.touchMove),this.isTouch=!1}touchDown(t){if(this.isTouch=!0,t.touches.length>1)return this.touch.pinch.x=t.touches[0].pageX-t.touches[1].pageX,this.touch.pinch.y=t.touches[0].pageY-t.touches[1].pageY,void(this.touch.pinch.start=Math.sqrt(this.touch.pinch.x*this.touch.pinch.x+this.touch.pinch.y*this.touch.pinch.y));this.touch.move.x=t.touches[0].pageX,this.touch.move.y=t.touches[0].pageY}touchUp(t){this.isTouch=!1,this.isPinch=!1,this.touch.direction={north:!1,east:!1,south:!1,west:!1}}touchMove(t){if(!this.isTouch)return;if(t.touches.length>1)return this.touch.pinch.x=t.touches[0].pageX-t.touches[1].pageX,this.touch.pinch.y=t.touches[0].pageY-t.touches[1].pageY,this.touch.pinch.end=Math.sqrt(this.touch.pinch.x*this.touch.pinch.x+this.touch.pinch.y*this.touch.pinch.y),this.touch.pinch.zoom=this.touch.pinch.start/this.touch.pinch.end,void(this.isPinch=!0);let h={width:window.innerWidth,height:window.innerHeight};this.element!==window&&(h={width:this.element.clientWidth,height:this.element.clientHeight}),this.touch.delta={x:parseInt(t.touches[0].pageX-this.touch.move.x),y:parseInt(t.touches[0].pageY-this.touch.move.y)},0!==this.touch.delta.y&&(this.touch.delta.y>0?(()=>{this.touch.direction.south=!0;this.touch.direction.north=!1})():(()=>{this.touch.direction.north=!0;this.touch.direction.south=!1})()),0!==this.touch.delta.x&&(this.touch.delta.x>0?(()=>{this.touch.direction.east=!0;this.touch.direction.west=!1})():(()=>{this.touch.direction.west=!0;this.touch.direction.east=!1})()),this.touch.move={x:t.touches[0].pageX,y:t.touches[0].pageY};let i=h.width/h.height,o=Math.PI/180,e=Math.PI/2;this.touch.yaw+=this.touch.delta.x/h.width*45*i*o,this.touch.pitch+=this.touch.delta.y/h.height*45*o,this.touch.pitch=Math.max(-e,Math.min(e,this.touch.pitch))}}t.Desktop=h,t.Mobile=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG91Y2hDb250cm9sLmpzIiwic291cmNlcyI6WyIuLi9zcmMvY29yZS9EZXNrdG9wLmpzIiwiLi4vc3JjL2NvcmUvTW9iaWxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBEZXNrdG9wIHtcbiAgICAgXG4gICAgY29uc3RydWN0b3IoZWxlbWVudCl7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50IHx8IHdpbmRvdztcbiAgICAgICAgdGhpcy5pc1RvdWNoID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy50b3VjaCA9IHtcbiAgICAgICAgICAgIGRlbHRhIDoge30sXG4gICAgICAgICAgICBtb3ZlICA6IHt9LFxuICAgICAgICAgICAgcGl0Y2ggOiAwLFxuICAgICAgICAgICAgeWF3ICAgOiAwLFxuICAgICAgICAgICAgZGlyZWN0aW9uIDoge1xuICAgICAgICAgICAgICAgIG5vcnRoIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZWFzdCAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzb3V0aCA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdlc3QgIDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gdGhpcy5tb3VzZURvd24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5tb3VzZVVwICAgPSB0aGlzLm1vdXNlVXAuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5tb3VzZU1vdmUgPSB0aGlzLm1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuXG4gICAgaW5pdCgpe1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnaW5pdCcpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd24pO1xuICAgICAgICBcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm1vdXNlVXApO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmUpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pc1RvdWNoID0gZmFsc2U7XG4gICAgfVxuXG4gICAgbW91c2VEb3duKGUpe1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ21vdXNlIGRvd24nKTtcblxuICAgICAgICB0aGlzLmlzVG91Y2ggID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnRvdWNoLm1vdmUueCA9IGUuY2xpZW50WDtcbiAgICAgICAgdGhpcy50b3VjaC5tb3ZlLnkgPSBlLmNsaWVudFk7XG4gICAgfVxuXG4gICAgbW91c2VVcChlKXtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ21vdXNlIHVwJyk7XG5cbiAgICAgICAgdGhpcy5pc1RvdWNoID0gZmFsc2U7XG4gICAgICAgIHRoaXMudG91Y2guZGlyZWN0aW9uID0ge1xuICAgICAgICAgICAgbm9ydGggOiBmYWxzZSxcbiAgICAgICAgICAgIGVhc3QgIDogZmFsc2UsXG4gICAgICAgICAgICBzb3V0aCA6IGZhbHNlLFxuICAgICAgICAgICAgd2VzdCAgOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgbW91c2VNb3ZlKGUpe1xuICAgICAgICBpZighdGhpcy5pc1RvdWNoKSByZXR1cm47XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdtb3VzZSBtb3ZlJyk7XG5cbiAgICAgICAgbGV0IHNjcmVlbiA9IHtcbiAgICAgICAgICAgIHdpZHRoICA6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0IDogd2luZG93LmlubmVySGVpZ2h0XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodGhpcy5lbGVtZW50ICE9PSB3aW5kb3cpIHNjcmVlbiA9IHtcbiAgICAgICAgICAgIHdpZHRoICA6IHRoaXMuZWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodCA6IHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHRoaXMudG91Y2guZGVsdGEgPSB7XG4gICAgICAgICAgICB4IDogZS5jbGllbnRYIC0gdGhpcy50b3VjaC5tb3ZlLngsXG4gICAgICAgICAgICB5IDogZS5jbGllbnRZIC0gdGhpcy50b3VjaC5tb3ZlLnlcbiAgICAgICAgfTtcbiAgICAgICBcbiAgICAgICAgaWYodGhpcy50b3VjaC5kZWx0YS55ICE9PSAwKSB0aGlzLnRvdWNoLmRlbHRhLnkgPiAwID8gKCAoKSA9PiB7IHRoaXMudG91Y2guZGlyZWN0aW9uLnNvdXRoID0gdHJ1ZTsgIHRoaXMudG91Y2guZGlyZWN0aW9uLm5vcnRoID0gZmFsc2U7IH0gKSgpIDogKCAoKT0+IHsgdGhpcy50b3VjaC5kaXJlY3Rpb24ubm9ydGggPSB0cnVlOyB0aGlzLnRvdWNoLmRpcmVjdGlvbi5zb3V0aCA9IGZhbHNlOyB9ICkoKTtcbiAgICAgICAgaWYodGhpcy50b3VjaC5kZWx0YS54ICE9PSAwKSB0aGlzLnRvdWNoLmRlbHRhLnggPiAwID8gKCAoKSA9PiB7IHRoaXMudG91Y2guZGlyZWN0aW9uLmVhc3QgID0gdHJ1ZTsgIHRoaXMudG91Y2guZGlyZWN0aW9uLndlc3QgID0gZmFsc2U7IH0gKSgpIDogKCAoKT0+IHsgdGhpcy50b3VjaC5kaXJlY3Rpb24ud2VzdCAgPSB0cnVlOyB0aGlzLnRvdWNoLmRpcmVjdGlvbi5lYXN0ICA9IGZhbHNlOyB9ICkoKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZGVsdGEnLCB0aGlzLnRvdWNoLmRlbHRhKTtcblxuICAgICAgICB0aGlzLnRvdWNoLm1vdmUgPSB7XG4gICAgICAgICAgICB4IDogZS5jbGllbnRYLFxuICAgICAgICAgICAgeSA6IGUuY2xpZW50WVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdtb3ZlICcsIHRoaXMudG91Y2gubW92ZSk7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NjcmVlbiAnLCBzY3JlZW4pXG5cbiAgICAgICAgbGV0IFxuICAgICAgICAgICAgZm92ICAgID0gNDUsXG4gICAgICAgICAgICBhc3BlY3QgPSBzY3JlZW4ud2lkdGggLyBzY3JlZW4uaGVpZ2h0LFxuICAgICAgICAgICAgcmFkaWFuID0gTWF0aC5QSS8xODAsXG4gICAgICAgICAgICBoYWxmICAgPSBNYXRoLlBJLzI7XG5cbiAgICAgICAgdGhpcy50b3VjaC55YXcgICArPSB0aGlzLnRvdWNoLmRlbHRhLnggLyBzY3JlZW4ud2lkdGggKiBmb3YgKiBhc3BlY3QgKiByYWRpYW47XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRvdWNoLnBpdGNoICs9IHRoaXMudG91Y2guZGVsdGEueSAvIHNjcmVlbi5oZWlnaHQgKiBmb3YgKiByYWRpYW47XG4gICAgICAgIHRoaXMudG91Y2gucGl0Y2ggID0gTWF0aC5tYXgoLWhhbGYsIE1hdGgubWluKGhhbGYsIHRoaXMudG91Y2gucGl0Y2gpKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZygneSB5YXcnLCB0aGlzLnRvdWNoLnlhdyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd4IHBpdGNoJywgdGhpcy50b3VjaC5waXRjaCk7XG4gICAgfVxuICAgICBcbn1cbiIsImV4cG9ydCBjbGFzcyBNb2JpbGUge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpe1xuXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQgfHwgd2luZG93O1xuICAgICAgICB0aGlzLmlzVG91Y2ggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1BpbmNoID0gZmFsc2U7XG4gXG4gICAgICAgIHRoaXMudG91Y2ggPSB7XG4gICAgICAgICAgICBkZWx0YSA6IHt9LFxuICAgICAgICAgICAgbW92ZSAgOiB7fSxcbiAgICAgICAgICAgIHBpbmNoIDoge30sXG4gICAgICAgICAgICBwaXRjaCA6IDAsXG4gICAgICAgICAgICB5YXcgICA6IDAsXG4gICAgICAgICAgICBkaXJlY3Rpb24gOiB7XG4gICAgICAgICAgICAgICAgbm9ydGggOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlYXN0ICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNvdXRoIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgd2VzdCAgOiBmYWxzZVxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnRvdWNoRG93biA9IHRoaXMudG91Y2hEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudG91Y2hVcCAgID0gdGhpcy50b3VjaFVwLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudG91Y2hNb3ZlID0gdGhpcy50b3VjaE1vdmUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmluaXQoKTsgICAgICAgIFxuICAgICAgICBcbiAgICB9XG5cblxuICAgIGluaXQoKXtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2luaXQnKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLnRvdWNoRG93bik7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy50b3VjaFVwKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMudG91Y2hNb3ZlKTtcblxuICAgICAgICB0aGlzLmlzVG91Y2ggPSBmYWxzZTsgICAgICAgIFxuXG4gICAgfVxuXG4gICAgdG91Y2hEb3duKGUpe1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RvdWNoIHN0YXJ0Jyk7XG5cbiAgICAgICAgdGhpcy5pc1RvdWNoID0gdHJ1ZTtcblxuICAgICAgICBpZihlLnRvdWNoZXMubGVuZ3RoID4gMSl7XG5cbiAgICAgICAgICAgIHRoaXMudG91Y2gucGluY2gueCA9IGUudG91Y2hlc1swXS5wYWdlWCAtIGUudG91Y2hlc1sxXS5wYWdlWDtcbiAgICAgICAgICAgIHRoaXMudG91Y2gucGluY2gueSA9IGUudG91Y2hlc1swXS5wYWdlWSAtIGUudG91Y2hlc1sxXS5wYWdlWTtcbiBcbiAgICAgICAgICAgIHRoaXMudG91Y2gucGluY2guc3RhcnQgPSBNYXRoLnNxcnQodGhpcy50b3VjaC5waW5jaC54ICogdGhpcy50b3VjaC5waW5jaC54ICsgdGhpcy50b3VjaC5waW5jaC55ICogdGhpcy50b3VjaC5waW5jaC55KTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdwaW5jaCBzdGFydCcgLHRoaXMudG91Y2gucGluY2guc3RhcnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuXG4gICAgICAgIHRoaXMudG91Y2gubW92ZS54ID0gZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICB0aGlzLnRvdWNoLm1vdmUueSA9IGUudG91Y2hlc1swXS5wYWdlWTtcbiAgICB9XG5cbiAgICB0b3VjaFVwKGUpeyBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RvdWNoIGVuZCcpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pc1RvdWNoID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNQaW5jaCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRvdWNoLmRpcmVjdGlvbiA9IHtcbiAgICAgICAgICAgIG5vcnRoIDogZmFsc2UsXG4gICAgICAgICAgICBlYXN0ICA6IGZhbHNlLFxuICAgICAgICAgICAgc291dGggOiBmYWxzZSxcbiAgICAgICAgICAgIHdlc3QgIDogZmFsc2VcbiAgICAgICAgfTsgICAgICAgIFxuICAgIH1cblxuICAgIHRvdWNoTW92ZShlKXtcbiAgICAgICAgaWYoIXRoaXMuaXNUb3VjaCkgcmV0dXJuOyAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygndG91Y2ggbW92ZScpO1xuXG4gICAgICAgIGlmKGUudG91Y2hlcy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50b3VjaC5waW5jaC54ID0gZS50b3VjaGVzWzBdLnBhZ2VYIC0gZS50b3VjaGVzWzFdLnBhZ2VYO1xuICAgICAgICAgICAgdGhpcy50b3VjaC5waW5jaC55ID0gZS50b3VjaGVzWzBdLnBhZ2VZIC0gZS50b3VjaGVzWzFdLnBhZ2VZO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3BpbmNoICcgLHRoaXMudG91Y2gucGluY2gpO1xuXG4gICAgICAgICAgICB0aGlzLnRvdWNoLnBpbmNoLmVuZCA9IE1hdGguc3FydCh0aGlzLnRvdWNoLnBpbmNoLnggKiB0aGlzLnRvdWNoLnBpbmNoLnggKyB0aGlzLnRvdWNoLnBpbmNoLnkgKiB0aGlzLnRvdWNoLnBpbmNoLnkpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3BpbmNoIGVuZCAnICx0aGlzLnRvdWNoLnBpbmNoLmVuZCk7XG5cblxuICAgICAgICAgICAgdGhpcy50b3VjaC5waW5jaC56b29tID0gdGhpcy50b3VjaC5waW5jaC5zdGFydCAvIHRoaXMudG91Y2gucGluY2guZW5kO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3BpbmNoIHpvb20nLCB0aGlzLnRvdWNoLnBpbmNoLnpvb20pO1xuXG4gICAgICAgICAgICB0aGlzLmlzUGluY2ggPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNjcmVlbiA9IHtcbiAgICAgICAgICAgIHdpZHRoICA6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0IDogd2luZG93LmlubmVySGVpZ2h0XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodGhpcy5lbGVtZW50ICE9PSB3aW5kb3cpIHNjcmVlbiA9IHtcbiAgICAgICAgICAgIHdpZHRoICA6IHRoaXMuZWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodCA6IHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnRvdWNoLmRlbHRhID0ge1xuICAgICAgICAgICAgeCA6IHBhcnNlSW50KGUudG91Y2hlc1swXS5wYWdlWCAtIHRoaXMudG91Y2gubW92ZS54KSxcbiAgICAgICAgICAgIHkgOiBwYXJzZUludChlLnRvdWNoZXNbMF0ucGFnZVkgLSB0aGlzLnRvdWNoLm1vdmUueSlcbiAgICAgICAgfTtcbiBcbiAgICAgICAgaWYodGhpcy50b3VjaC5kZWx0YS55ICE9PSAwKSB0aGlzLnRvdWNoLmRlbHRhLnkgPiAwID8gKCAoKSA9PiB7IHRoaXMudG91Y2guZGlyZWN0aW9uLnNvdXRoID0gdHJ1ZTsgIHRoaXMudG91Y2guZGlyZWN0aW9uLm5vcnRoID0gZmFsc2U7IH0gKSgpIDogKCAoKT0+IHsgdGhpcy50b3VjaC5kaXJlY3Rpb24ubm9ydGggPSB0cnVlOyB0aGlzLnRvdWNoLmRpcmVjdGlvbi5zb3V0aCA9IGZhbHNlOyB9ICkoKTtcbiAgICAgICAgaWYodGhpcy50b3VjaC5kZWx0YS54ICE9PSAwKSB0aGlzLnRvdWNoLmRlbHRhLnggPiAwID8gKCAoKSA9PiB7IHRoaXMudG91Y2guZGlyZWN0aW9uLmVhc3QgID0gdHJ1ZTsgIHRoaXMudG91Y2guZGlyZWN0aW9uLndlc3QgID0gZmFsc2U7IH0gKSgpIDogKCAoKT0+IHsgdGhpcy50b3VjaC5kaXJlY3Rpb24ud2VzdCAgPSB0cnVlOyB0aGlzLnRvdWNoLmRpcmVjdGlvbi5lYXN0ICA9IGZhbHNlOyB9ICkoKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZGVsdGEgJywgdGhpcy50b3VjaC5kZWx0YSk7XG5cbiAgICAgICAgdGhpcy50b3VjaC5tb3ZlID0ge1xuICAgICAgICAgICAgeCA6IGUudG91Y2hlc1swXS5wYWdlWCxcbiAgICAgICAgICAgIHkgOiBlLnRvdWNoZXNbMF0ucGFnZVlcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZygnbW92ZSAnLCB0aGlzLnRvdWNoLm1vdmUpOyAgICAgICAgXG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NjcmVlbiAnLCBzY3JlZW4pO1xuXG4gICAgICAgIGxldCBcbiAgICAgICAgICAgIGZvdiAgICA9IDQ1LFxuICAgICAgICAgICAgYXNwZWN0ID0gc2NyZWVuLndpZHRoIC8gc2NyZWVuLmhlaWdodCxcbiAgICAgICAgICAgIHJhZGlhbiA9IE1hdGguUEkvMTgwLFxuICAgICAgICAgICAgaGFsZiAgID0gTWF0aC5QSS8yO1xuXG4gICAgICAgIHRoaXMudG91Y2gueWF3ICAgKz0gdGhpcy50b3VjaC5kZWx0YS54IC8gc2NyZWVuLndpZHRoICogZm92ICogYXNwZWN0ICogcmFkaWFuO1xuICAgICAgICBcbiAgICAgICAgdGhpcy50b3VjaC5waXRjaCArPSB0aGlzLnRvdWNoLmRlbHRhLnkgLyBzY3JlZW4uaGVpZ2h0ICogZm92ICogcmFkaWFuO1xuICAgICAgICB0aGlzLnRvdWNoLnBpdGNoICA9IE1hdGgubWF4KC1oYWxmLCBNYXRoLm1pbihoYWxmLCB0aGlzLnRvdWNoLnBpdGNoKSk7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3lhdycsIHRoaXMudG91Y2gueWF3KTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3BpdGNoJywgdGhpcy50b3VjaC5waXRjaCk7XG4gICAgfVxuXG59XG5cbiAgIl0sIm5hbWVzIjpbIkRlc2t0b3AiLCJbb2JqZWN0IE9iamVjdF0iLCJlbGVtZW50IiwidGhpcyIsIndpbmRvdyIsImlzVG91Y2giLCJ0b3VjaCIsImRlbHRhIiwibW92ZSIsInBpdGNoIiwieWF3IiwiZGlyZWN0aW9uIiwibm9ydGgiLCJlYXN0Iiwic291dGgiLCJ3ZXN0IiwibW91c2VEb3duIiwiYmluZCIsIm1vdXNlVXAiLCJtb3VzZU1vdmUiLCJpbml0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ4IiwiY2xpZW50WCIsInkiLCJjbGllbnRZIiwic2NyZWVuIiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImFzcGVjdCIsInJhZGlhbiIsIk1hdGgiLCJQSSIsImhhbGYiLCJtYXgiLCJtaW4iLCJNb2JpbGUiLCJpc1BpbmNoIiwicGluY2giLCJ0b3VjaERvd24iLCJ0b3VjaFVwIiwidG91Y2hNb3ZlIiwidG91Y2hlcyIsImxlbmd0aCIsInBhZ2VYIiwicGFnZVkiLCJzdGFydCIsInNxcnQiLCJlbmQiLCJ6b29tIiwicGFyc2VJbnQiXSwibWFwcGluZ3MiOiJxTkFBYUEsRUFFVEMsWUFBWUMsR0FFUkMsS0FBS0QsUUFBVUEsR0FBV0UsT0FDMUJELEtBQUtFLFNBQVUsRUFFZkYsS0FBS0csT0FDREMsU0FDQUMsUUFDQUMsTUFBUSxFQUNSQyxJQUFRLEVBQ1JDLFdBQ0lDLE9BQVEsRUFDUkMsTUFBUSxFQUNSQyxPQUFRLEVBQ1JDLE1BQVEsSUFJaEJaLEtBQUthLFVBQVliLEtBQUthLFVBQVVDLEtBQUtkLE1BQ3JDQSxLQUFLZSxRQUFZZixLQUFLZSxRQUFRRCxLQUFLZCxNQUNuQ0EsS0FBS2dCLFVBQVloQixLQUFLZ0IsVUFBVUYsS0FBS2QsTUFFckNBLEtBQUtpQixPQUlUbkIsT0FFSUUsS0FBS0QsUUFBUW1CLGlCQUFpQixZQUFhbEIsS0FBS2EsV0FFaERaLE9BQU9pQixpQkFBaUIsVUFBV2xCLEtBQUtlLFNBQ3hDZCxPQUFPaUIsaUJBQWlCLFlBQWFsQixLQUFLZ0IsV0FFMUNoQixLQUFLRSxTQUFVLEVBR25CSixVQUFVcUIsR0FJTm5CLEtBQUtFLFNBQVcsRUFFaEJGLEtBQUtHLE1BQU1FLEtBQUtlLEVBQUlELEVBQUVFLFFBQ3RCckIsS0FBS0csTUFBTUUsS0FBS2lCLEVBQUlILEVBQUVJLFFBRzFCekIsUUFBUXFCLEdBR0puQixLQUFLRSxTQUFVLEVBQ2ZGLEtBQUtHLE1BQU1LLFdBQ1BDLE9BQVEsRUFDUkMsTUFBUSxFQUNSQyxPQUFRLEVBQ1JDLE1B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
